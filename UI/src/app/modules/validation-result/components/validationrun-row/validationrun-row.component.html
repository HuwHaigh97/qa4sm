<p-panel *ngIf="published">
  <ng-template pTemplate="header">
    <h5 class="p-my-0"><span class="font-weight-normal">Name:</span> {{ model.validationRun.name_tag }}</h5>
  </ng-template>
  <ng-template pTemplate="icons" class="doilink">
    <h5 class="my-0"> DOI: <a class="doilink" target="_blank"
                              href="{{this.getDoiPrefix()}}{{ model.validationRun.doi }}">{{ model.validationRun.doi }}</a>
    </h5>
  </ng-template>
  <div class="p-grid">
    <div class="p-col-4">
      <strong>Data:</strong><br/>
      <span *ngFor="let datasetRowModel of model.datasetRows">
          {{(datasetRowModel.dataset$|async)?.pretty_name}},
        {{(datasetRowModel.datasetVersion$|async)?.pretty_name}},
        {{(datasetRowModel.datasetVariable$|async)?.pretty_name}} <br>
        </span>

    </div>

    <div class="p-col-4">
      <strong>Reference:</strong><br/>
      <span>
          {{(model.referenceRow.dataset$|async)?.pretty_name}},
        {{(model.referenceRow.datasetVersion$|async)?.pretty_name}},
        {{(model.referenceRow.datasetVariable$|async)?.pretty_name}}
        </span>
    </div>

    <div class="p-col-2" style="max-width: 7rem;">
      <strong>Created:</strong><br/>
      {{ model.validationRun.start_time|date:"YYYY-MM-dd" }}
    </div>
  </div>
</p-panel>

<!-- Custom validations-->
<p-panel *ngIf="!published">
  <ng-template pTemplate="header">
    <h5 class="my-0">
      <!--      if there is expiry date property: -->
      <span *ngIf="validationRun.expiry_date">
          <span *ngIf="validationRun.is_near_expiry" class="p-panel-header-icon pi pi-exclamation-triangle expiry-icons"
                title="'This validation will SOON be automatically removed during cleanup on {{ validationRun.expiry_date|date: dateFormat :timeZone}}."></span>
          <span *ngIf="!validationRun.is_near_expiry" class="p-panel-header-icon pi pi-calendar expiry-icons"
                title="This validation will be automatically removed during cleanup on {{ validationRun.expiry_date|date: dateFormat :timeZone }}.">
          </span>
      </span>
      <!--      if there is no expiry date property: -->
      <span *ngIf="!validationRun.expiry_date">
          <span *ngIf="validationRun.progress === -1" class="p-panel-header-icon pi pi-ban expiry-icons"
                title="This validation was cancelled."></span>
          <span *ngIf="!validationRun.end_time && validationRun.progress === 0"
                class="p-panel-header-icon pi pi-spin pi-spinner expiry-icons"
                title="This validation is still running."></span>

          <a class="doilink" target="_blank" href="{{getDoiPrefix()}}{{ validationRun.doi }}">
            <span *ngIf="validationRun.doi" class="p-panel-header-icon pi pi-book expiry-icons"
                  title="This result has been published with zenodo. It will NOT be automatically removed during cleanup.">
            </span>
          </a>
        <span *ngIf="validationRun.is_archived" class="p-panel-header-icon pi pi- expiry-icons"
              title="This validation has been archived. It will NOT be automatically removed during cleanup.">
          <fa-icon [icon]="faIcons.faArchive"></fa-icon>
        </span>

      </span>

      <span class="font-weight-normal"> Started:
        {{ validationRun.start_time|date: dateFormat :timeZone }}
      </span>

    </h5>
  </ng-template>
  <ng-template pTemplate="icons">
    <h5 class="my-0"><span class=" font-weight-normal">Name:</span> {{ model.validationRun.name_tag }}</h5>
  </ng-template>

  <div class="p-grid">
    <div class="p-col-4">
      <strong>Data:</strong><br/>
      <span *ngFor="let datasetRowModel of model.datasetRows">
          {{(datasetRowModel.dataset$|async)?.pretty_name}},
        {{(datasetRowModel.datasetVersion$|async)?.pretty_name}},
        {{(datasetRowModel.datasetVariable$|async)?.pretty_name}} <br>
        </span>

    </div>

    <div class="p-col-4">
      <strong>Reference:</strong><br/>
      <span>
          {{(model.referenceRow.dataset$|async)?.pretty_name}},
        {{(model.referenceRow.datasetVersion$|async)?.pretty_name}},
        {{(model.referenceRow.datasetVariable$|async)?.pretty_name}}
        </span>
    </div>

    <div class="p-col-2" style="max-width: 7rem;">
      <strong>Status:</strong><br/>
      {{ getStatusFromProgress(validationRun)}}
    </div>
  </div>
</p-panel>
